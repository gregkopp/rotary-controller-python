#: import NumberItem rcp.components.forms.number_item
#: import DualNumberItem rcp.components.forms.dual_number_item
#: import StringItem rcp.components.forms.string_item
#: import BooleanItem rcp.components.forms.boolean_item

<ScalePanel>:
  orientation: "vertical"
  padding: 20
  spacing: 10
  ScrollView:
    do_scroll_x: False
    do_scroll_y: True
    GridLayout:
      id: grid_layout
      cols: 1
      spacing: 15
      size_hint_y: None
      padding: 10
      
      # Enable/Disable Toggle
      BoxLayout:
        size_hint_y: None
        height: 60
        orientation: "horizontal"
        spacing: 10
        Label:
          text: "Enable Scale"
          font_size: 24
          size_hint_x: 0.7
        ToggleButton:
          size_hint_x: None
          width: 120
          height: 50
          font_size: 24
          text: 'ON' if root.scale.enabled else 'OFF'
          state: 'down' if root.scale.enabled else 'normal'
          on_release: root.scale.enabled = True if self.state == 'down' else False
      
      # Scale Name
      StringItem:
        name: "Axis Name"
        value: root.scale.axisName
        on_value: root.scale.axisName = self.value
        font_size: 24
        height: 60
      
      # Main Settings Group
      BoxLayout:
        size_hint_y: None
        height: 400
        orientation: "vertical"
        spacing: 15
        Label:
          text: "Main Settings"
          font_size: 28
          size_hint_y: None
          height: 40
          color: (0.8, 0.8, 0.8, 1)
        
        NumberItem:
          name: "Ratio Numerator"
          value: root.scale.ratioNum
          on_value: root.scale.ratioNum = self.value
          font_size: 24
          height: 60
          disabled: not root.scale.enabled
          
        NumberItem:
          name: "Ratio Denominator"
          value: root.scale.ratioDen
          help_file: "scales.rst"
          on_value: root.scale.ratioDen = self.value
          font_size: 24
          height: 60
          disabled: not root.scale.enabled
          
        NumberItem:
          name: "Steps Per Revolution"
          value: root.scale.stepsPerRev
          help_file: "scales.rst"
          on_value: root.scale.stepsPerRev = self.value
          font_size: 24
          height: 60
          disabled: not root.scale.enabled
      
      # Sync Settings Group
      BoxLayout:
        size_hint_y: None
        height: 300
        orientation: "vertical"
        spacing: 15
        Label:
          text: "Sync Settings"
          font_size: 28
          size_hint_y: None
          height: 40
          color: (0.8, 0.8, 0.8, 1)
        
        NumberItem:
          name: "Sync Ratio Numerator"
          value: root.scale.syncRatioNum
          help_file: "scales.rst"
          on_value: root.scale.syncRatioNum = self.value
          font_size: 24
          height: 60
          disabled: not root.scale.enabled
          
        NumberItem:
          name: "Sync Ratio Denominator"
          value: root.scale.syncRatioDen
          on_value: root.scale.syncRatioDen = self.value
          font_size: 24
          height: 60
          disabled: not root.scale.enabled
      
      # Mode Settings Group
      BoxLayout:
        size_hint_y: None
        height: 100
        orientation: "vertical"
        spacing: 15
        Label:
          text: "Mode Settings"
          font_size: 28
          size_hint_y: None
          height: 40
          color: (0.8, 0.8, 0.8, 1)
        
        BooleanItem:
          name: "Spindle Mode"
          value: root.scale.spindleMode
          on_value: root.scale.spindleMode = self.value
          font_size: 24
          height: 60
          disabled: not root.scale.enabled
